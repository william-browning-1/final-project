<link rel="stylesheet" type="text/css" href="styles.css">

<h1>Employees</h1>

<select id="attributeSelect">
    <option value="lname">Last Name</option>
    <option value="fname">First Name</option>
    <option value="ssn">SSN</option>
    <option value="salary">Salary</option>
</select>
<button id='sortButton'>Sort</button>

<table id='employee-table'>

  <thead>
    <tr>
      <th>Last Name</th>
      <th>First Name</th>
      <th>SSN</th>
      <th>Salary</th>
    </tr>
  </thead>

  <tbody id='data'>
    <% @employees.each do |employee| %>
    <tr> 
      <td><%= employee.lname %></td>
      <td><%= employee.fname %></td>
      <td><%= employee.ssn%></td>
      <td><%= employee.salary%></td>
    </tr>
    <% end %>
  </tbody>

</table>

<script>
document.getElementById('sortButton').addEventListener('click', function() {
    var attribute = document.getElementById('attributeSelect').value;
    console.log("Selected attribute:", attribute);
    
    var tbody = document.getElementById('data');
    var rows = tbody.rows;
    console.log("Rows before sorting:", rows);

    var arr = Array.from(rows).slice(1); // Slice to exclude header row
    arr.sort(function(a, b) {
        var aCell = a.cells.namedItem(attribute);
        var bCell = b.cells.namedItem(attribute);
        var aValue = aCell ? aCell.textContent.trim() : '';
        var bValue = bCell ? bCell.textContent.trim() : '';
        console.log("aValue:", aValue, "bValue:", bValue);
        return aValue.localeCompare(bValue);
    });
    console.log("Sorted array:", arr);

    // Log sorted array before appending
    arr.forEach(function(row) {
        console.log(row.cells.namedItem(attribute) ? row.cells.namedItem(attribute).textContent.trim() : '');
    });

    // Clear existing rows
    tbody.innerHTML = '';

    // Append sorted rows
    arr.forEach(function(row) {
        tbody.appendChild(row);
    });
});
</script>




